<html>
<head>
    <script>
        var dojoConfig = (function(){
            var base = location.href.split("/");
            base.pop();
            base = base.join("/");
            return {
                async: true,
                isDebug: true,
                packages:[{
                    name: 'esriES', location: base + '/js'
                }]
            };
        })();
    </script>
    <link rel="stylesheet" href="http://js.arcgis.com/3.14/esri/css/esri.css">
    <script src="http://js.arcgis.com/3.14/"></script>

    <script type="text/javascript">
        require([
            "esriES/staticmap",
            "esri/request",
            "dojo/domReady!"
        ], function(StaticMap, esriRequest) {
            staticMap = new StaticMap();

            var options={
                basemap: "streets",
                zoom: 5,
                latitude: 40.432781,
                longitude: -3.626666,
                size: [400, 300]
            };

            staticMap.getImage(options).then(function(imageURL){

                document.getElementById("url").innerHTML = imageURL;
                document.getElementById("image").src = imageURL;
            });

        });
    </script>
</head>
<body>
    <div>Image URL: <span id="url"></span></div>
    <img src="" id="image">
</body>
</html>